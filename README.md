DOT BOXは、DOTのついた箱をつくることのできるツールです。JSON で直方体や円柱を配置して、Three.js で即時に描画する仕組みになっているので、箱以外のものも制作できるかもしれません。ページ内のエディタで JSON を編集して送信すると、シーンがクリアされて再描画されます。OBJ 形式でのエクスポートにも対応しているため、家庭用の3Dプリンタで印刷して組み立てることができます。

**公開URL（GitHub Pages）**
- https://ay0803.github.io/box_make_lego/
- ブラウザ上で JSON を送信して 3D を作成できます。
- 箱を作るための JSONコードを作成するためのサポート機能があります。さまざまな設定にチェックを入れて、JSONコードをつくりましょう。作ったJSONを、送信ボックスに送ることができます。SUBMITすることで、シーンに描画されます。

**主な機能**
- Three.js（CDN）による最小構成の 3D シーン（ライト・グリッド・軸）
- JSON 駆動のレイアウト（サイズ・位置・色）
- ページ内エディタ（テキストエリア + SUBMIT）でのライブ更新
- LEGO 風の安定したカラーパレット（未指定時に自動割り当て）
- OBJ 形式エクスポート（ジオメトリのみ）

**動かし方**
- `index.html` をブラウザで開きます。
https://ay0803.github.io/box_make_lego/

**UI の使い方**
- 画面左上のパネルに現在の JSON が表示されます。編集して `SUBMIT` を押すと、パースに成功した場合に再描画されます。エラーはボタン横に赤字で表示されます。
- `Download OBJ` ボタンで、現在のメッシュ群を 1 つの OBJ ファイルとしてダウンロードできます（.mtl などのマテリアルは含みません）。
- `Environment` パネルではカメラ距離倍率（0.00〜2.00）をスライダーで変更できます。シーンの中心付近を自動で周回するカメラに反映されます。
- `JSON support | Make box` パネルでは、箱の外形に使える JSONコードを生成できます（Top / Side A / Side B を選択、X/Y/Z を入力して `Create JSON`）。`Send JSON Above` で上のエディタへ転記できます（描画は上段の `SUBMIT` でシーンに送信するまで変更されません）。

**JSON 仕様**
- このシステムは、独自のJSONシステムを使用しています。
- 形状タイプごとに `sizes` と `positions` を配列で並べます。対応タイプは `box` / `cylinder` / `tube` です。
  - `box.sizes`: `[x, y, z]` の配列
  - `box.positions`: `[x, y, z]` の配列
  - `cylinder.sizes`: `[diameter, height]` の配列（円柱の円周分割数は固定）
  - `cylinder.positions`: `[x, y, z]` の配列
  - `tube.sizes`: `[innerDiameter, outerDiameter, height]` の配列（外径 > 内径）
  - `tube.positions`: `[x, y, z]` の配列
  - 各タイプ配下に `colors`（数値、例: `0xC91A09`）の配列を指定可能。省略時はパレットから自動で割り当てます。
- `sizes` と `positions` の配列長は一致させるのが推奨です。不足分は先頭要素で補完されます。
- 例:
```
{
  "box": {
    "sizes": [[10,10,20], [20,5,10], [10,10,20], [10,5,50]],
    "positions": [[17,5,10], [5,0,10], [27,0,10], [5,0,40]]
  },
  "cylinder": {
    "sizes": [[10,20]],
    "positions": [[27,5,10]]
  },
  "tube": {
    "sizes": [[4,10,15]],
    "positions": [[35,7.5,10]]
  }
}
```

**色について**
- `colors` を各タイプに指定しない場合、内部のカラーパレットから安定的に割り当てます。
- 同じ並び順であれば、再描画しても同じ色が適用されます。

**OBJ エクスポート**
- メッシュをワールド座標に変換したうえで、1 つの OBJ テキストにまとめて出力します。
- 出力はジオメトリのみ（マテリアル/テクスチャは含みません）。

**開発メモ**
- Three.js は `https://unpkg.com/three@0.160.0/build/three.module.js` を利用しています。
- 円柱の円周分割数は実装で固定（既定値 50）です。
- 既存の JSON を大きく変更する場合は、各配列の整合性（長さ・値の次元）に注意してください。
